(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-378a52a2"],{"3b61":function(t,a,e){"use strict";var n=e("9875"),r=e.n(n);r.a},5097:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-2"},[t._m(0),e("div",{staticClass:"canvas-box"},[e("canvas",{ref:"canva",attrs:{id:"canva",width:"700",height:"500"},on:{mousemove:function(a){return t.clacOriginalRectangle(a)},mouseout:function(a){return t.drawBackGround()}}}),e("div",{staticClass:"set-sider"},[e("button",{staticClass:"uploader",on:{click:function(a){return t.UpLoad()}}},[e("input",{ref:"uploadFile",attrs:{type:"file",id:"",accept:"image/*"}}),t._v(" UpLoad ")]),e("button",{on:{click:function(a){return t.downLoad()}}},[t._v("Save")]),e("button",{on:{click:function(a){t.setStatus=0,t.filterStatus=""}}},[t._v("放大檢視")]),e("div",{staticClass:"select-box",on:{click:function(a){t.setStatus=1}}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filterStatus,expression:"filterStatus"}],on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.filterStatus=a.target.multiple?e:e[0]}}},[e("option",{attrs:{selected:"",value:""}},[t._v("---请选择--")]),t._l(t.selectList,(function(a,n){return e("option",{key:n,domProps:{value:a.filter}},[t._v(t._s(a.name))])}))],2)])])])])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"header"},[e("h2",[t._v("圖片編輯")])])}];e("d3b7"),e("96cf"),e("e6cf");function i(t,a,e,n,r,i,o){try{var c=t[i](o),s=c.value}catch(h){return void e(h)}c.done?a(s):Promise.resolve(s).then(n,r)}function o(t){return function(){var a=this,e=arguments;return new Promise((function(n,r){var o=t.apply(a,e);function c(t){i(o,n,r,c,s,"next",t)}function s(t){i(o,n,r,c,s,"throw",t)}c(void 0)}))}}var c={name:"Canvas",data:function(){return{setStatus:-1,filterStatus:"",imgData:0,setImgScale:0,canvaData:{context:"",centerPoint:{},originalRadius:50,originalRectangle:{},scale:2,scaleGlassRectangle:0},selectList:[{filter:1,name:"灰色調"},{filter:2,name:"黑白滤镜"},{filter:3,name:"反向滤镜"},{filter:4,name:"去色滤镜"},{filter:5,name:"单色滤镜"}],bufferImg:{}}},watch:{filterStatus:function(t){""!==t&&(this.setStatus=1,this.FilterEffect())}},computed:{},mounted:function(){},methods:{UpLoad:function(){var t=this;this.$refs["uploadFile"].addEventListener("change",(function(a){var e=a.target.files[0],n=new FileReader;n.readAsDataURL(e);var r=t;n.onload=function(t){r.imgData=new Image,r.imgData.src=t.target.result,r.imgData.onload=function(){r.canvasStart()}}}))},downLoad:function(){var t=new Image;t.src=this.$refs["canva"].toDataURL();var a=t.src,e=document.createElement("a");e.download="save_img",e.href=a,e.dispatchEvent(new MouseEvent("click"))},canvasStart:function(){var t=this.$refs["canva"];this.canvaData.context=t.getContext("2d"),this.setImgScale=Math.min(this.$refs["canva"].width/this.imgData.width,this.$refs["canva"].height/this.imgData.height),this.$refs["canva"].width=this.imgData.width*this.setImgScale,this.$refs["canva"].height=this.imgData.height*this.setImgScale,this.canvaData.context.drawImage(this.imgData,0,0,this.imgData.width*this.setImgScale,this.imgData.height*this.setImgScale)},drawBackGround:function(){0==this.setStatus&&(this.canvaData.context.clearRect(0,0,this.$refs["canva"].width,this.$refs["canva"].height),this.canvaData.context.drawImage(this.imgData,0,0,this.imgData.width*this.setImgScale,this.imgData.height*this.setImgScale))},clacOriginalRectangle:function(t){if(0==this.setStatus){var a=this.$refs["canva"].getBoundingClientRect();t={x:t.x-a.left,y:t.y-a.top},this.drawBackGround(),this.canvaData.originalRectangle.x=t.x-this.canvaData.originalRadius,this.canvaData.originalRectangle.y=t.y-this.canvaData.originalRadius,this.canvaData.originalRectangle.width=2*this.canvaData.originalRadius,this.canvaData.originalRectangle.height=2*this.canvaData.originalRadius,this.canvaData.centerPoint.x=t.x,this.canvaData.centerPoint.y=t.y,this.canvaData.context.save(),this.canvaData.context.beginPath(),this.canvaData.context.arc(this.canvaData.centerPoint.x,this.canvaData.centerPoint.y,this.canvaData.originalRadius,0,2*Math.PI,!1),this.canvaData.context.clip(),this.scaleGlassRectangle(),this.draw(),this.canvaData.context.restore()}},draw:function(){this.canvaData.context.drawImage(this.$refs["canva"],this.canvaData.originalRectangle.x,this.canvaData.originalRectangle.y,this.canvaData.originalRectangle.width,this.canvaData.originalRectangle.height,this.canvaData.scaleGlassRectangle.x,this.canvaData.scaleGlassRectangle.y,this.canvaData.scaleGlassRectangle.width,this.canvaData.scaleGlassRectangle.height),this.canvaData.context.beginPath();var t=this.canvaData.context.createRadialGradient(this.canvaData.centerPoint.x,this.canvaData.centerPoint.y,this.canvaData.originalRadius-5,this.canvaData.centerPoint.x,this.canvaData.centerPoint.y,this.canvaData.originalRadius);t.addColorStop(0,"rgba(0,0,0,0.2)"),t.addColorStop(.8,"silver"),t.addColorStop(.9,"silver"),t.addColorStop(1,"rgba(150,150,150,0.9)"),this.canvaData.context.strokeStyle=t,this.canvaData.context.lineWidth=5,this.canvaData.context.arc(this.canvaData.centerPoint.x,this.canvaData.centerPoint.y,this.canvaData.originalRadius,0,2*Math.PI,!1),this.canvaData.context.stroke()},scaleGlassRectangle:function(){this.canvaData.scaleGlassRectangle={x:this.canvaData.centerPoint.x-this.canvaData.originalRectangle.width*this.canvaData.scale/2,y:this.canvaData.centerPoint.y-this.canvaData.originalRectangle.height*this.canvaData.scale/2,width:this.canvaData.originalRectangle.width*this.canvaData.scale,height:this.canvaData.originalRectangle.height*this.canvaData.scale}},FilterEffect:function(){var t=this;return o(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.bufferImg={},t.canvaData.context.drawImage(t.imgData,0,0,t.imgData.width*t.setImgScale,t.imgData.height*t.setImgScale),a.next=4,Object.assign({},t.canvaData);case 4:return t.bufferImg=a.sent,a.next=7,t.getPixels();case 7:return e=a.sent,a.next=10,t.chooseFilter(e.data,t.bufferImg.context,e);case 10:t.bufferImg.context.putImageData(e,0,0);case 11:case"end":return a.stop()}}),a)})))()},getPixels:function(){var t=this;return new Promise((function(a){a(t.bufferImg.context.getImageData(0,0,t.$refs["canva"].width,t.$refs["canva"].height))}))},chooseFilter:function(t,a,e){if(1==this.filterStatus)for(var n=0;n<t.length;n+=4){var r=(t[n]+t[n+1]+t[n+2])/3;t[n]=t[n+1]=t[n+2]=r}else if(2==this.filterStatus)for(n=0;n<t.length;n+=4){var i=(t[n]+t[n+1]+t[n+2])/3;t[n]=t[n+1]=t[n+2]=i>=100?255:0}else if(3==this.filterStatus)for(n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2];else if(4==this.filterStatus)for(n=0;n<t.length;n++){i=Math.floor((Math.min(t[n],t[n+1],t[n+2])+Math.max(t[n],t[n+1],t[n+2]))/2);t[n]=t[n+1]=t[n+2]=i}else if(5==this.filterStatus)for(n=0;n<canvas.height*canvas.width;n++)t[4*n+2]=0,t[4*n+1]=0}}},s=c,h=(e("3b61"),e("2877")),l=Object(h["a"])(s,n,r,!1,null,"3e6f71c8",null);a["default"]=l.exports},"96cf":function(t,a,e){var n=function(t){"use strict";var a,e=Object.prototype,n=e.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(t,a,e,n){var r=a&&a.prototype instanceof d?a:d,i=Object.create(r.prototype),o=new I(n||[]);return i._invoke=b(t,e,o),i}function h(t,a,e){try{return{type:"normal",arg:t.call(a,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=s;var l="suspendedStart",u="suspendedYield",f="executing",v="completed",g={};function d(){}function m(){}function p(){}var y={};y[i]=function(){return this};var w=Object.getPrototypeOf,D=w&&w(w(P([])));D&&D!==e&&n.call(D,i)&&(y=D);var x=p.prototype=d.prototype=Object.create(y);function R(t){["next","throw","return"].forEach((function(a){t[a]=function(t){return this._invoke(a,t)}}))}function S(t,a){function e(r,i,o,c){var s=h(t[r],t,i);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"===typeof u&&n.call(u,"__await")?a.resolve(u.__await).then((function(t){e("next",t,o,c)}),(function(t){e("throw",t,o,c)})):a.resolve(u).then((function(t){l.value=t,o(l)}),(function(t){return e("throw",t,o,c)}))}c(s.arg)}var r;function i(t,n){function i(){return new a((function(a,r){e(t,n,a,r)}))}return r=r?r.then(i,i):i()}this._invoke=i}function b(t,a,e){var n=l;return function(r,i){if(n===f)throw new Error("Generator is already running");if(n===v){if("throw"===r)throw i;return k()}e.method=r,e.arg=i;while(1){var o=e.delegate;if(o){var c=L(o,e);if(c){if(c===g)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===l)throw n=v,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=f;var s=h(t,a,e);if("normal"===s.type){if(n=e.done?v:u,s.arg===g)continue;return{value:s.arg,done:e.done}}"throw"===s.type&&(n=v,e.method="throw",e.arg=s.arg)}}}function L(t,e){var n=t.iterator[e.method];if(n===a){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=a,L(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,g;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=a),e.delegate=null,g):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function _(t){var a={tryLoc:t[0]};1 in t&&(a.catchLoc=t[1]),2 in t&&(a.finallyLoc=t[2],a.afterLoc=t[3]),this.tryEntries.push(a)}function E(t){var a=t.completion||{};a.type="normal",delete a.arg,t.completion=a}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){while(++r<t.length)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=a,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:a,done:!0}}return m.prototype=x.constructor=p,p.constructor=m,p[c]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var a="function"===typeof t&&t.constructor;return!!a&&(a===m||"GeneratorFunction"===(a.displayName||a.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},R(S.prototype),S.prototype[o]=function(){return this},t.AsyncIterator=S,t.async=function(a,e,n,r,i){void 0===i&&(i=Promise);var o=new S(s(a,e,n,r),i);return t.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},R(x),x[c]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var a=[];for(var e in t)a.push(e);return a.reverse(),function e(){while(a.length){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0],a=t.completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return c.type="throw",c.arg=t,e.next=n,r&&(e.method="next",e.arg=a),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],c=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),h=n.call(o,"finallyLoc");if(s&&h){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,a){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=a&&a<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=a,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(t,a){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&a&&(this.next=a),g},finish:function(t){for(var a=this.tryEntries.length-1;a>=0;--a){var e=this.tryEntries[a];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),E(e),g}},catch:function(t){for(var a=this.tryEntries.length-1;a>=0;--a){var e=this.tryEntries[a];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var r=n.arg;E(e)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=a),g}},t}(t.exports);try{regeneratorRuntime=n}catch(r){Function("r","regeneratorRuntime = r")(n)}},9875:function(t,a,e){}}]);
//# sourceMappingURL=chunk-378a52a2.ad7ce967.js.map